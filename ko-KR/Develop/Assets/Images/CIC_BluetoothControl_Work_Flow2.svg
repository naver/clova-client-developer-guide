<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1170px" preserveAspectRatio="none" style="width:645px;height:1170px;" version="1.1" viewBox="0 0 645 1170" width="645px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1082.2666" style="stroke: #000000; stroke-width: 1.0;" width="10" x="82" y="67.2295"/><rect fill="#FFFFFF" height="229.8945" style="stroke: #000000; stroke-width: 1.0;" width="10" x="249" y="250.3887"/><rect fill="#FFFFFF" height="478.5361" style="stroke: #000000; stroke-width: 1.0;" width="10" x="249" y="597.7305"/><rect fill="#FFFFFF" height="1082.2666" style="stroke: #000000; stroke-width: 1.0;" width="10" x="567" y="67.2295"/><rect fill="#FFFFFF" height="232.377" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="429.5" x="189.5" y="131.459"/><rect fill="#FFFFFF" height="105.4473" style="stroke: none; stroke-width: 1.0;" width="429.5" x="189.5" y="258.3887"/><rect fill="#FFFFFF" height="588.9834" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="621.5" x="13" y="495.2832"/><rect fill="#FFFFFF" height="229.6416" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="435" x="189.5" y="612.7305"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="87" x2="87" y1="57.2295" y2="1158.4961"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="253.5" x2="253.5" y1="57.2295" y2="1158.4961"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="572" x2="572" y1="57.2295" y2="1158.4961"/><rect fill="#9EA0CA" height="53.2295" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="128" x="23" y="3"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="40" y="36.1533">블루투스 기기</text><rect fill="#9EA0CA" height="53.2295" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="109" x="199.5" y="3"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="216.5" y="36.1533">클라이언트</text><rect fill="#05D686" height="53.2295" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="74" x="535" y="3"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="552" y="36.1533">CLOVA</text><rect fill="#FFFFFF" height="1082.2666" style="stroke: #000000; stroke-width: 1.0;" width="10" x="82" y="67.2295"/><rect fill="#FFFFFF" height="229.8945" style="stroke: #000000; stroke-width: 1.0;" width="10" x="249" y="250.3887"/><rect fill="#FFFFFF" height="478.5361" style="stroke: #000000; stroke-width: 1.0;" width="10" x="249" y="597.7305"/><rect fill="#FFFFFF" height="1082.2666" style="stroke: #000000; stroke-width: 1.0;" width="10" x="567" y="67.2295"/><polygon fill="#9EA0CA" points="49,72.2295,610,72.2295,620,95.2295,610,119.2295,49,119.2295,39,95.2295,49,72.2295" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="248.5" y="102.3828">블루투스 기기 연결 요청</text><path d="M194.5,131.459 L268.5,131.459 L268.5,159.459 L258.5,169.459 L189.5,169.459 L189.5,136.459 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="232.377" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="429.5" x="189.5" y="131.459"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="214.5" y="156.3047">alt</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="293.5" y="157.3047">[특정 기기 지정 == 예]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="269" y1="250.3887" y2="246.3887"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="269" y1="250.3887" y2="254.3887"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="566" y1="250.3887" y2="250.3887"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="216" x="305" y="219.2695">DeviceControl.BtConnect (with payload)</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="368" y="235.752">지시 메시지 전송</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="189.5" x2="619" y1="259.3887" y2="259.3887"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="204.5" y="283.2344">[특정 기기 지정 == 아니오]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="269" y1="355.8359" y2="351.8359"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="269" y1="355.8359" y2="359.8359"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="566" y1="355.8359" y2="355.8359"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="233" x="296.5" y="324.7168">DeviceControl.BtConnect (without payload)</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="368" y="341.1992">지시 메시지 전송</text><line style="stroke: #000000; stroke-width: 1.0;" x1="92" x2="102" y1="413.3184" y2="409.3184"/><line style="stroke: #000000; stroke-width: 1.0;" x1="92" x2="102" y1="413.3184" y2="417.3184"/><line style="stroke: #000000; stroke-width: 1.0;" x1="92" x2="248" y1="413.3184" y2="413.3184"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="51" x="145" y="398.6816">연결 요청</text><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="480.2832" y2="476.2832"/><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="480.2832" y2="484.2832"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="566" y1="480.2832" y2="480.2832"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="278.5" y="449.1641">DeviceControl.ActionExecuted (with DeviceState)</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="359.5" y="465.6465">이벤트 메시지 전송</text><path d="M18,495.2832 L96,495.2832 L96,523.2832 L86,533.2832 L13,533.2832 L13,500.2832 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="588.9834" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="621.5" x="13" y="495.2832"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="38" y="520.1289">opt</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="250" x="121" y="521.1289">[연결하려는 기기가 PIN 코드를 요구한 경우]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="247" x2="237" y1="597.7305" y2="593.7305"/><line style="stroke: #000000; stroke-width: 1.0;" x1="247" x2="237" y1="597.7305" y2="601.7305"/><line style="stroke: #000000; stroke-width: 1.0;" x1="92" x2="248" y1="597.7305" y2="597.7305"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="133.5" y="583.0938">PIN 코드 요청</text><path d="M194.5,612.7305 L389.5,612.7305 L389.5,640.7305 L379.5,650.7305 L189.5,650.7305 L189.5,617.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="229.6416" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="435" x="189.5" y="612.7305"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="214.5" y="637.5762">"사용자의 핀코드 입력"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="710.1777" y2="706.1777"/><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="710.1777" y2="714.1777"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="566" y1="710.1777" y2="710.1777"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="206" x="310" y="679.0586">DeviceControl.BtRequestForPINCode</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="362" y="695.541">이벤트 메시지 전송</text><polygon fill="#9EA0CA" points="220,723.1777,604,723.1777,614,746.1777,604,770.1777,220,770.1777,210,746.1777,220,723.1777" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="325.25" y="753.3311">사용자 PIN 코드 입력 처리</text><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="269" y1="834.3721" y2="830.3721"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="269" y1="834.3721" y2="838.3721"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="566" y1="834.3721" y2="834.3721"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="200" x="313" y="803.2529">DeviceControl.BtConnectByPINCode</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="368" y="819.7354">지시 메시지 전송</text><line style="stroke: #000000; stroke-width: 1.0;" x1="92" x2="102" y1="891.8545" y2="887.8545"/><line style="stroke: #000000; stroke-width: 1.0;" x1="92" x2="102" y1="891.8545" y2="895.8545"/><line style="stroke: #000000; stroke-width: 1.0;" x1="92" x2="248" y1="891.8545" y2="891.8545"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="114" y="877.2178">PIN 코드로 접속 요청</text><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="958.8193" y2="954.8193"/><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="958.8193" y2="962.8193"/><line style="stroke: #000000; stroke-width: 1.0;" x1="259" x2="566" y1="958.8193" y2="958.8193"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="163" x="331.5" y="927.7002">DeviceControl.ActionExecuted</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="362" y="944.1826">이벤트 메시지 전송</text><line style="stroke: #000000; stroke-width: 1.0;" x1="247" x2="237" y1="1009.3018" y2="1005.3018"/><line style="stroke: #000000; stroke-width: 1.0;" x1="247" x2="237" y1="1009.3018" y2="1013.3018"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92" x2="248" y1="1009.3018" y2="1009.3018"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="131.5" y="994.665">기기 접속 수락</text><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="1076.2666" y2="1072.2666"/><line style="stroke: #000000; stroke-width: 1.0;" x1="565" x2="555" y1="1076.2666" y2="1080.2666"/><line style="stroke: #000000; stroke-width: 1.0;" x1="254" x2="566" y1="1076.2666" y2="1076.2666"/><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="338" y="1045.1475">DeviceControl.ReportState</text><text fill="#000000" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="359.5" y="1061.6299">이벤트 메시지 전송</text><polygon fill="#9EA0CA" points="49,1096.2666,610,1096.2666,620,1119.2666,610,1143.2666,49,1143.2666,39,1119.2666,49,1096.2666" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#FFFFFF" font-family="&quot;Noto Sans CJK KR&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="280.5" y="1126.4199">연결 결과 공유</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Noto Sans CJK KR", sans-serif

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

participant "블루투스 기기" as device #9EA0CA
participant 클라이언트 as client #9EA0CA
participant "CLOVA" as clova #05D686

activate clova
activate device
hnote over device, clova : 블루투스 기기 연결 요청
 alt 특정 기기 지정 == 예
	clova ->> client : DeviceControl.BtConnect (with payload)\n지시 메시지 전송

	activate client
 else 특정 기기 지정 == 아니오
    clova ->> client : DeviceControl.BtConnect (without payload)\n지시 메시지 전송
end

  client ->> device : 연결 요청
  client - ->> clova : DeviceControl.ActionExecuted (with DeviceState)\n이벤트 메시지 전송

	deactivate client
opt 연결하려는 기기가 PIN 코드를 요구한 경우
	device ->> client : PIN 코드 요청

	activate client

  group "사용자의 핀코드 입력"
    client ->> clova : DeviceControl.BtRequestForPINCode\n이벤트 메시지 전송
    hnote over client, clova : 사용자 PIN 코드 입력 처리
    clova ->> client : DeviceControl.BtConnectByPINCode\n지시 메시지 전송
  end
  client ->> device : PIN 코드로 접속 요청
  client ->> clova: DeviceControl.ActionExecuted\n이벤트 메시지 전송
	device - ->> client : 기기 접속 수락
  client ->> clova : DeviceControl.ReportState\n이벤트 메시지 전송
deactivate client
end
hnote over device, clova : 연결 결과 공유

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS949
Language: ko
Country: KR
--></g></svg>