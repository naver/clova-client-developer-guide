## 메시지 큐 관리하기 {#ManageMessageQ}

클라이언트는 CIC로부터 연속적으로 메시지를 송수신합니다. 이때 클라이언트가 CIC로부터 수신하는 지시 메시지는 다음과 같은 특징이 있습니다.

* 한 번에 다수의 지시 메시지와 부가 정보를 포함한 메시지가 CIC로부터 수신될 수 있습니다.
* 수신된 지시 메시지의 [대화 ID](/Develop/Guides/Manage_Dialog_ID_And_Handle_Tasks.md)는 서로 다를 수 있습니다.
* CIC에서 지시 메시지를 전송할 때 순서가 보장되지 않습니다.

위와 같은 특징으로 인해 클라이언트는 지시 메시지를 순차적으로 보관하고 꺼낼 수 있는 데이터 구조인 큐(queue)를 사용해야 하며 이를 메시지 큐라고 부릅니다.

<div class="note">
  <p><strong>Note!</strong></p>
  <p>대화 ID가 포함되지 않은 지시 메시지는 받는 즉시 처리되어야 합니다.</p>
</div>

개발자는 각 메시지 큐에 쌓인 지시 메시지가 하나씩 처리되도록 개발해야 하며, 이때 클라이언트가 가지고 있는 사용자의 마지막 요청에 대응하는 메시지가 처리되도록 해야 합니다. 사용자의 요청은 [대화 ID](/Develop/Guides/Manage_Dialog_ID_And_Handle_Tasks.md)로 식별할 수 있으며, 클라이언트는 마지막 요청에 대한 대화 ID를 보관하고 있어야 합니다. 만약 클라이언트가 이미 취소된 대화 ID를 가진 지시 메시지를 큐에 보관하고 있다면 해당 메시지와 그 메시지에 상응하는 부가 정보를 큐에서 제거해야 합니다.

클라이언트 개발자의 판단이나 계획한 UX에 따라 다음과 같은 사항을 정하면 됩니다.
* 관리할 메시지 큐의 수와 크기
* 메시지 큐 사이의 처리 우선 순위

예를 들면, 음악 재생([AudioPlayer](/Develop/References/MessageInterfaces/AudioPlayer.md))과 같이 사용자 음성 입력이나 클라이언트의 음성 출력 중에도 끊김없이 동작을 수행하는 UX를 제공하면 관련 메시지 큐의 지시 메시지를 별도로 처리해 줄 필요가 있습니다. 일부 API 네임스페이스는 동시에 단일 지시 메시지만을 보내기도 합니다. 이때 해당 네임스페이스에 대해 따로 메시지 큐를 관리할 필요가 없을 수도 있습니다.
